<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" xmls:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title layout:title-pattern="$LAYOUT_TITLE - $CONTENT_TITLE">Javatter</title>
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/css/layout.css}">
</head>

<body>
    <!-- ヘッダー（※未ログイン時のみ表示される） -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light" sec:authorize="!isAuthenticated()">
        <div class="container">
            <a class="navbar-brand " href="/"><i class="fab fa-java mr-2"></i>Javatter</a>

            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <form class="form-inline ml-auto mr-auto">
                    <input class="form-control mr-sm-2 rounded-pill" type="search" placeholder="Search"
                        aria-label="Search">
                    <button class="btn btn-outline-primary my-2 my-sm-0 rounded-pill" type="submit">Search</button>
                </form>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/login}">ログイン</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/users/new}">アカウント作成</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="javatter container">
        <div class="javatter-row row">
            <!-- 左メニュー画面（※ログイン時のみ表示される） -->
            <nav class="javatter__menu col-sm-4 col-md-3" sec:authorize="isAuthenticated()" th:with="currentUser = ${#authentication.principal.user}">
                <!-- Javatterロゴ -->
                <i class="fab fa-java fa-3x mb-3"></i>
                <!-- メニューリスト -->
                <ul class="javatter__menu-list list-group list-group-flush">
                    <li><i class="fas fa-home"></i>ホーム<a th:href="@{/home}"></a></li>
                    <li><i class="fas fa-users"></i>ユーザー<a th:href="@{/users}"></a></li>
                    <li><i class="fas fa-bell"></i>通知<a th:href="@{/notifications}"></a></li>
                    <li><i class="fas fa-envelope"></i>メッセージ<a th:href="@{/messages}"></a></li>
                    <li><i class="fas fa-bookmark"></i>ブックマーク<a th:href="@{/bookmarks}"></a></li>
                    <li><i class="fas fa-list-alt"></i>リスト<a th:href="@{/tweets}"></a></li>
                    <li><i class="fas fa-user"></i>プロフィール<a th:href="@{|/users/${currentUser.id}|}"></a></li>
                    <li><i class="fas fa-ellipsis-h"></i>もっと見る<a th:href="@{/tweets}"></a></li>
                </ul>
                <!-- ツイートするボタン -->
                <button class="javatter__menu-tweet btn btn-lg btn-primary rounded-pill">
                    <span>ツイートする</span>
                    <a th:href="@{/new_tweet}"></a>
                </button>
                <!-- ログインユーザー情報 -->
                <div class="javatter__menu-principal row">
                    <div class="javatter__menu-principal-image col-sm-6 col-md-4">
                        <span th:text="${currentUser.profileImage}"></span>
                    </div>
                    <div class="javatter__menu-principal-name col-sm-6 col-md-8">
                        <span th:text="${currentUser.email}"></span><br>
                        <span th:text="${currentUser.name}"></span>
                    </div>
                </div>
                <!-- ログアウトボタン -->
                <div class="javatter__menu-logout">
                    <span>ログアウト</span>
                    <a th:href="@{/logout}"></a>
                </div>

            </nav>
            <!-- 中央メイン画面 -->
            <div class="javatter__main col-sm-4 col-md-6">
                <div sec:authorize="isAuthenticated()">
                    <div layout:fragment="main-header"></div>
                </div>
                <div layout:fragment="main-contents"></div>
            </div>
            <!-- 右インフォ画面 -->
            <div class="javatter__info col-sm-4 col-md-3">info</div>
        </div>
    </div>
    <script src="/js/jquery-3.5.1.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="https://kit.fontawesome.com/6bb1565f31.js" crossorigin="anonymous"></script>
</body>

</html>